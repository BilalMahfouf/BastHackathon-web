# =============================================================================
# Mosquitto MQTT Broker Configuration
# =============================================================================
# This configuration enables anonymous access for hackathon simplicity.
# For production, enable authentication and TLS.
# =============================================================================

# -----------------------------------------------------------------------------
# Listeners
# -----------------------------------------------------------------------------
# MQTT listener on port 1883 (accessible from LAN for ESP32 devices)
listener 1883
protocol mqtt

# WebSocket listener on port 9001 (optional - for browser MQTT clients)
listener 9001
protocol websockets

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Allow anonymous connections (no username/password required)
# WARNING: Only use this for development/hackathon!
allow_anonymous true

# -----------------------------------------------------------------------------
# Persistence
# -----------------------------------------------------------------------------
# Enable message persistence
persistence true
persistence_location /mosquitto/data/

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log to file and stdout
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# Log types: debug, error, warning, notice, information, subscribe, unsubscribe
log_type error
log_type warning
log_type notice
log_type information

# Log connection events
connection_messages true

# Log timestamp
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S
